name: rTorrent Push Commit

on:
  push:
    branches:
      - 'main'
      - 'develop'

jobs:
  intel:
    runs-on: [self-hosted, linux, x86, intel]
    steps:
      - name: Clone Repo
        run: |
          cd ..
          rm -rf rTorrent-seedbox
          git clone -q https://github.com/stickz/rTorrent-seedbox

      - name: Run Chmod
        run: chmod 777 .github/scripts/build.sh

      - name: Build Intel Debian 12 x86
        run: ./.github/scripts/build.sh
        shell: bash
  amd:
    runs-on: [self-hosted, linux, x86, amd]
    steps:
      - name: Clone Repo
        run: |
          cd ..
          rm -rf rTorrent-seedbox
          git clone -q https://github.com/stickz/rTorrent-seedbox

      - name: Run Chmod
        run: chmod 777 .github/scripts/build.sh

      - name: Build AMD Debian 12 x86
        run: ./.github/scripts/build.sh
        shell: bash
  arm:
    runs-on: [self-hosted, linux, ARM64]
    steps:
      - name: Clone Repo
        run: |
          cd ..
          rm -rf rTorrent-seedbox
          git clone -q https://github.com/stickz/rTorrent-seedbox

      - name: Run Chmod
        run: chmod 777 .github/scripts/build.sh

      - name: Build ARM64 Debian 12
        run: ./.github/scripts/build.sh
        shell: bash
